### ボイスメモ帳 実装計画書

**1. プロジェクト概要**

*   **コンセプト**: 自分だけのオリジナルボイスメモ帳を作る
*   **ターゲット**: 日々忙しい中で、自分の考えや課題を整理したい個人
*   **解決したい課題とその解決策**: メモ帳やノートに書く一手間を減らしたい → 音声による手軽な記録と高精度な文字起こし
*   **利用シーン**: スマホで記録して、手軽に利用したい
*   **利用の流れ**: 起動したらすぐ記録する。記録を小分けにする。将来的にはLLMで小分けにしたデータを分析
*   **類似既存アプリで表現**: notta, ChatGPTのようなメモ・要約機能
*   **なぜあなたがこれを行うのか**: 余計な機能は不要で、シンプルさを追求したい

**2. プロジェクトの目的**
音声を手軽に記録し、その内容を高精度で文字起こしすることで、簡易的なボイスメモ帳として利用できるアプリケーションを開発する。

**3. 主要機能**

*   **音声記録**: マイクからの音声を録音し、ファイルとして保存する。
*   **文字起こし**: 録音された音声データを高精度でテキストに変換する。高速リアルタイム性よりも、記録データの精度を優先する。
*   **記録開始トリガー**:
    *   手動での記録開始（「記録開始」ボタンの押下）。
    *   設定による自動記録開始（アプリケーション起動時に自動で記録を開始）。
*   **テキスト保存**: 文字起こしされたテキストをファイルとして保存する。
*   **細かく分割**: 記録された音声を細かく（例: 5分程度）分割する機能。

**4. 技術スタック（初期提案）**

以下のライブラリを組み合わせて実装を進めます。

*   **Python**: 全体のプログラミング言語。
*   **音声入出力**: `sounddevice`
    *   理由: マイクからの音声入力を扱いやすく、クロスプラットフォームで動作するため。
*   **音声認識 (文字起こし)**: `SpeechRecognition`
    *   理由: 複数の音声認識エンジン（Google Web Speech API, OpenAI Whisperなど）を統一的なインターフェースで利用できるため。まずは手軽なGoogle Web Speech APIを検討し、精度やコストに応じて他のオプションも検討します。
*   **GUIフレームワーク**: `tkinter`
    *   理由: Python標準で提供されており、外部ライブラリのインストールが不要で、シンプルなUIを迅速に作成できるため。手軽さという要件に合致すると考えます。
*   **ファイル操作**: Python標準ライブラリ（`os`, `datetime`など）
    *   理由: 録音ファイルの保存やテキストファイルの作成に利用。

**5. フェーズごとの実装計画**

**フェーズ1: コア機能の実装 (音声記録と文字起こし)**

1.  **環境構築**: 必要なライブラリ (`sounddevice`, `SpeechRecognition`) をインストールする。
2.  **音声録音モジュール**:
    *   マイクからの音声入力を開始し、指定された時間または手動停止まで録音する機能。
    *   録音された音声を`.wav`ファイル形式で保存する。
3.  **文字起こしモジュール**:
    *   保存された`.wav`ファイルを読み込み、`SpeechRecognition`ライブラリを使用して文字起こしを実行する。
    *   文字起こし結果をテキストとして返す。
4.  **保存モジュール**:
    *   文字起こしされたテキストを、日付と時刻を名前に含んだ`.txt`ファイルとして保存する。

**フェーズ2: 基本GUIの実装**

1.  **UIフレームワークの選定**: `tkinter`を使った基本的なウィンドウを作成する。
2.  **記録開始ボタン**:
    *   ボタンを配置し、クリックすると音声録音と文字起こし、保存処理が開始されるように連携する。
3.  **ステータス表示**: 録音中、文字起こし中、完了などの現在の状態をユーザーにフィードバックするテキストラベルを設ける。
4.  **結果表示**: 文字起こしが完了した後、そのテキストをGUI上に一時的に表示するエリアを設ける（任意）。

**フェーズ3: 設定機能と自動記録の実装**

1.  **設定画面/項目**:
    *   「起動時に自動で記録を開始する」設定のON/OFFを切り替えるチェックボックスまたはトグルを追加する。
    *   設定の永続化（例: シンプルな設定ファイル (`.ini`や`.json`) で保存）。
2.  **自動記録ロジック**:
    *   アプリケーション起動時に設定を読み込み、自動記録設定がONであれば、記録開始ボタンの押下なしに録音を開始する。
3.  **エラーハンドリング**: 録音失敗時や文字起こしエラー時のメッセージ表示など、基本的なエラー処理を実装する。

**6. 疑問点と考慮事項**

*   **文字起こしエンジンの選択と精度/コスト**:
    *   `SpeechRecognition`ライブラリのGoogle Web Speech APIは手軽ですが、長時間の音声やAPI制限の有無が不明です。より高精度な文字起こしを求める場合、Google Cloud Speech-to-TextやOpenAI Whisper APIなどの有料APIを検討すべきでしょうか？それとも、ローカルで動作するWhisperモデル（`transformers`ライブラリ）の利用も視野に入れますか？（ただし、ローカルWhisperは環境構築とリソース消費が大きい可能性があります。）
*   **音声ファイルの保存形式と品質**:
    *   `.wav`形式で保存することを考えていますが、長時間の録音の場合、ファイルサイズが大きくなる可能性があります。圧縮形式（例: MP3）への変換は必要でしょうか？その際の品質劣化は許容範囲内ですか？
*   **ファイル命名規則**:
    *   現状では「日付\_時刻.txt」を想定していますが、ユーザーが任意のタイトルを付けられるようにする機能は必要でしょうか？
*   **GUIの複雑さ**:
    *   `tkinter`はシンプルなUIに適していますが、よりリッチなUI（例: 録音中の波形表示、進捗バーなど）が必要になった場合、他のGUIフレームワーク（`PyQt`など）への移行を検討する必要があります。現時点での「手軽さ」を優先する方針で問題ないでしょうか？
*   **バックグラウンドでの動作**:
    *   自動記録機能の場合、アプリケーションが最小化されてもバックグラウンドで録音を続けるべきでしょうか？
*   **エラー発生時のリトライ**:
    *   文字起こしが一時的に失敗した場合、再試行するようなロジックは必要でしょうか？

**7. 今後の拡張機能（将来的な検討）**

*   **ノート機能**: 文字起こしされたテキストを整理・編集できるノート機能
*   **LLM連携**: 文字起こしデータをLLMで分析（項目ごとの振り分け、要約など）
*   **外部連携**: 他のアプリケーションやサービスとの連携